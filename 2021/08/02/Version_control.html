<script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } }); </script>
<script type="text/x-mathjax-config">
   MathJax.Hub.Config({
     tex2jax: {
       inlineMath: [ ['$','$'], ["\\(","\\)"] ],
       processEscapes: true
     }
   });
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>


<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Version control and Github</h1><p class="post-meta post-meta-title">
    </p>

    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <hr />

<p>Questions:</p>
<ul>
  <li>What is version control and why is it useful?</li>
  <li>How can I use Git to version control my files?</li>
  <li>What is the difference between Git and Github?</li>
</ul>

<p>Objectives:</p>
<ul>
  <li>Describe the benefits of version control</li>
  <li>Initialise a Git repository from the command line or through the Github interface</li>
  <li>Use command line git to version control your work locally</li>
  <li>Use git and Github to store and share a remote copy of your work</li>
</ul>

<p>Keypoints:</p>
<ul>
  <li>Version control is the ultimate undo button for code</li>
  <li>Github is very widely used in academia and industry</li>
  <li>Use <code class="language-plaintext highlighter-rouge">git init</code> to initialise an empty git repository</li>
  <li>Use <code class="language-plaintext highlighter-rouge">git status</code> for a summary of your repository</li>
  <li>Git uses a two-step process for version control: <code class="language-plaintext highlighter-rouge">git add</code> and <code class="language-plaintext highlighter-rouge">git commit</code></li>
  <li>See the changes made to a file using <code class="language-plaintext highlighter-rouge">git diff</code></li>
  <li>Use <code class="language-plaintext highlighter-rouge">git log</code> to see a record of the commits that have been made</li>
  <li>You can <code class="language-plaintext highlighter-rouge">add</code> and <code class="language-plaintext highlighter-rouge">commit</code> multiple files</li>
  <li>Use <code class="language-plaintext highlighter-rouge">git push</code> and <code class="language-plaintext highlighter-rouge">git pull</code> to communicate with a remote repository</li>
  <li>For some tasks the Github web interface is a useful alternative</li>
</ul>

<hr />

<h3 id="version-control-is-the-ultimate-undo-button-for-code">Version control is the ultimate undo button for code</h3>

<p><img src="/CompPhys/images/Final.png" alt="" /></p>

<p>There are several benefits to version control:</p>

<ul>
  <li>Nothing that is committed to version control is ever lost, unless you work really, really hard at it.</li>
  <li>You can go back in time to see exactly who wrote what on a particular day, or what version of a program was used to generate a particular set of results.</li>
  <li>We can revert to a previous version, much like the “undo” feature in an editor.</li>
  <li>When several people collaborate in the same project, it’s possible to accidentally overlook or overwrite someone’s changes. The version control system automatically notifies users whenever there’s a conflict between one person’s work and another’s.</li>
</ul>

<p>Version control is what software professionals use to keep track of what they’ve done and to collaborate with other people. Every large software development project relies on it, and most programmers use it for their small jobs as well. And it isn’t just for software: books, papers, small data sets, and anything that changes over time or needs to be shared can and should be stored in a version control system.</p>

<div class="Toast">
   <span class="Toast-icon"><svg class="octicon octicon-info" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg></span>
   <span class="Toast-content">Version control is not well-suited to binary files as much of the functionality that we will see later does not work efficiently with these types of file.</span>
</div>

<h3 id="github-is-very-widely-used-in-academia-and-industry">Github is very widely used in academia and industry</h3>

<p>In this lesson we will be using a version control system called git. You can install and use git locally on your own computer (without any internet connection). However there are several online services that will store remote copies of your git repositories. Remote copies are highly encouraged for two reasons:</p>
<ul>
  <li>as a backup in case your computer dies</li>
  <li>to share your work with other people</li>
</ul>

<p>In this lesson we will be using this most popular git-based tool - <a href="https://github.com">Github</a>. This is also where all of the <a href="https://github.com/nu-cem/CompPhys">code for this website is stored</a>. We will see later in the course that Github can also be used to host website and automate tasks.</p>

<h3 id="use-git-init-to-initialise-an-empty-git-repository">Use <code class="language-plaintext highlighter-rouge">git init</code> to initialise an empty git repository</h3>

<p>First, let’s create a folder to hold the files we want to version control:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>my_project
<span class="nb">cd </span>my_project
<span class="nb">ls</span>
</code></pre></div></div>

<p>Second, create a file. You can use the in-built terminal editor <a href="https://www.vim.org/">vim</a> or <a href="https://www.nano-editor.org/">nano</a>, or any plain-text editor (such as Notepad). Whichever editor you use, you need to make sure you save the file in the <code class="language-plaintext highlighter-rouge">my_scripts</code> folder.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim hello.py
</code></pre></div></div>

<div class="Toast">
   <span class="Toast-icon"><svg class="octicon octicon-info" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg></span>
   <span class="Toast-content">To start writing in vim type `i`.</span>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">hello_world</span><span class="p">():</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"hello_world"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
  <span class="n">hello_world</span><span class="p">()</span>
</code></pre></div></div>

<div class="Toast">
   <span class="Toast-icon"><svg class="octicon octicon-info" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg></span>
   <span class="Toast-content">We are not writing the Python shebang as we treating this like a Python module (with functions/code you can import) rather than a Python script that is ran from top-to-bottom.</span>
</div>

<div class="Toast">
   <span class="Toast-icon"><svg class="octicon octicon-info" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg></span>
   <span class="Toast-content">To save and exit vim you type `Esc`, `:wq`, `Enter`.</span>
</div>

<p>Third, create a git repository to version control this new file:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git init
</code></pre></div></div>

<p>The git repository is a hidden file so to see it we need to use the command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> <span class="nt">-a</span>
</code></pre></div></div>

<pre><code class="language-output">.   ..   .git   hello.py
</code></pre>

<p>Git stores all of the repository data in the .git directory. To delete the repository you delete this hidden folder</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> <span class="nt">-rf</span> .git
</code></pre></div></div>

<div class="Toast Toast--warning googoo">
   <span class="Toast-icon"><svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg></span>
   <span class="Toast-content">Always take care using the command `rm -rf`. This permenantly deletes a directory and everything within the directory - and it will not be available in the recylcing bin!</span>
</div>

<h3 id="use-git-status-for-a-summary-of-your-repository">Use <code class="language-plaintext highlighter-rouge">git status</code> for a summary of your repository</h3>

<p><code class="language-plaintext highlighter-rouge">git status</code> is a very useful command. It summarises the status of your git repository.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git status
</code></pre></div></div>

<pre><code class="language-output">On branch master

No commits yet

Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)
	hello.py

nothing added to commit but untracked files present (use "git add" to track)
</code></pre>

<div class="Toast">
   <span class="Toast-icon"><svg class="octicon octicon-info" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg></span>
   <span class="Toast-content">For a long time the default branch in most Git repositories was named `master`. Fortunately, many people have become aware that this terminology should be replaced to something more inclusive: `main`. If you branch is called `master` you can rename it using `git branch -m master main`.</span>
</div>

<p>The git outputs are generally quite helpful. Here we are told that there is “nothing added to commit but untracked files present” and git suggests that we use “git add” to track. What is this all about?</p>

<h3 id="git-uses-a-two-step-process-for-version-control-git-add-and-git-commit">Git uses a two-step process for version control: <code class="language-plaintext highlighter-rouge">git add</code> and <code class="language-plaintext highlighter-rouge">git commit</code></h3>

<p>If you think of Git as taking snapshots of changes over the life of a project, <code class="language-plaintext highlighter-rouge">git add</code> specifies what will go in a snapshot (putting things in the staging area), and <code class="language-plaintext highlighter-rouge">git commit</code> then actually takes the snapshot, and makes a permanent record of it (as a commit).</p>

<p><img src="/CompPhys/images/addcommi.svg" alt="" />
<img src="/CompPhys/images/addcommi2.svg" alt="" /></p>

<p>First let’s add our new file:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add hello.py
git status
</code></pre></div></div>

<pre><code class="language-output">On branch main

No commits yet

Changes to be committed:
  (use "git rm --cached &lt;file&gt;..." to unstage)
	new file:   hello.py
</code></pre>

<p>Second let’s commit our file to the repository history. We provide a short commit message, describing what the changes are and/or why they were made:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git commit <span class="nt">-m</span> <span class="s2">"function to demonstrate the if __name__ == __main__ syntax"</span>
</code></pre></div></div>

<pre><code class="language-output">[main (root-commit) 0f7a7b4] create a hello_world function
 1 file changed, 5 insertions(+)
 create mode 100644 hello.py
</code></pre>

<div class="Toast">
   <span class="Toast-icon"><svg class="octicon octicon-info" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg></span>
   <span class="Toast-content">Good commit messages often describe *why* a change was made. For example 'fixed a bug that was breaking the unit tests'. Information about *what* changed can be gotten by asking git to compare different versions of the file (we'll see this later in the lesson).</span>
</div>

<p>The two stage process is useful because it means you can carefully craft your commit snapshots. For example, I may make several changes to several files. I then want to version control the changes. Instead of being forced to use a single commit for changes that are unrelated I can split my changes into several smaller commits - for example, one for “implementing a new algorithm to find the minima” and one for “improved function docstrings”.</p>

<h3 id="see-the-changes-made-to-a-file-using-git-diff">See the changes made to a file using <code class="language-plaintext highlighter-rouge">git diff</code></h3>

<p>Now let’s make an edit to the file</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim hello.py
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">hello_world</span><span class="p">():</span>
  <span class="s">"function to greet the world"</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"hello_world"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
  <span class="n">hello_world</span><span class="p">()</span>
</code></pre></div></div>

<p>We can see the difference between the latest version of the file and the version of the file stored in the git repository using <code class="language-plaintext highlighter-rouge">git diff</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git diff
</code></pre></div></div>

<pre><code class="language-output">diff --git a/hello.py b/hello.py
index cd6a6ec..df4dfe3 100644
--- a/hello.py
+++ b/hello.py
@@ -1,4 +1,5 @@
 def hello_world():
+    "function to greet the world"
     print("helloooo world")

 if __name__ == "__main__":
(END)
</code></pre>

<p>Commit this change to the repository:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add 
git commit <span class="nt">-m</span> <span class="s2">"include docstring as per project guidelines"</span>
git status
</code></pre></div></div>

<pre><code class="language-output">On branch main
nothing to commit, working tree clean
</code></pre>

<h3 id="use-git-log-to-see-a-record-of-the-commits-that-have-been-made">Use git log to see a record of the commits that have been made</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git log
</code></pre></div></div>

<pre><code class="language-output">commit b4bfc23897e6dd3c8faed6f101b5438ff0cc98c1 (HEAD -&gt; main)
Author: Lucy Whalley &lt;l.whalley@northumbria.ac.uk&gt;
Date:   Mon Nov 22 20:40:14 2021 +0000

    include docstring as per project guidelines

commit 0f7a7b4e03439cd9f854dec2f438a85ffbd31fd9
Author: Lucy Whalley &lt;l.whalley@northumbria.ac.uk&gt;
Date:   Mon Nov 22 20:24:32 2021 +0000

    function to demonstrate the if __name__ == __main__ syntax
</code></pre>

<h3 id="you-can-add-and-commit-multiple-files">You can <code class="language-plaintext highlighter-rouge">add</code> and <code class="language-plaintext highlighter-rouge">commit</code> multiple files</h3>

<p>Create a new python module that we will import into out “hello.py” module:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim bonjour.py
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">bonjour_le_monde</span><span class="p">():</span>
 <span class="k">print</span><span class="p">(</span><span class="s">"bonjour le monde!"</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim hello.py
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">bonjour</span>

<span class="k">def</span> <span class="nf">hello_world</span><span class="p">():</span>
  <span class="s">"function to greet the world"</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"hello_world"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
  <span class="n">hello_world</span><span class="p">()</span>
  <span class="n">bonjour</span><span class="p">.</span><span class="n">bonjour_le_monde</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">python</span> <span class="n">hello</span><span class="p">.</span><span class="n">py</span>
</code></pre></div></div>

<pre><code class="language-output">hello_world
bonjour le monde!
</code></pre>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git status
</code></pre></div></div>

<pre><code class="language-output">On branch main
Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
	modified:   hello.py

Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)
	__pycache__/
	bonjour.py

no changes added to commit (use "git add" and/or "git commit -a")
</code></pre>

<p>We can add and commit both files at the same time</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add hello.py bonjour.py
git commit <span class="nt">-m</span> <span class="s2">"implement and import french translation"</span>
</code></pre></div></div>

<pre><code class="language-output">[main 8fb9bff] implement and import french translation
 2 files changed, 6 insertions(+), 1 deletion(-)
 create mode 100644 bonjour.py
</code></pre>

<h3 id="use-git-push-and-git-pull-to-communicate-with-a-remote-repository">Use <code class="language-plaintext highlighter-rouge">git push</code> and <code class="language-plaintext highlighter-rouge">git pull</code> to communicate with a remote repository</h3>

<p>Currently all of our files and changes are stored locally on our computer.</p>

<p>In practice, most programmers hold up-to-date copies of their files on a remote service such as Github. To create a remote repository on the Github servers follow these four steps:</p>

<ol>
  <li>Log into Github</li>
  <li>Click on the “+” icon in the top right hand corner to create a new repository</li>
  <li>Provide a name and description</li>
  <li>Select “Add a README file” and “Choose a license”</li>
</ol>

<div class="Toast">
   <span class="Toast-icon"><svg class="octicon octicon-info" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg></span>
   <span class="Toast-content">To decide which open source license you would like to use visit [https://choosealicense.com/](https://choosealicense.com/). </span>
</div>

<p>You now need to <code class="language-plaintext highlighter-rouge">push</code> your local repository to the remote server. To do so, follow the commands under “…or push an existing repository from the command line” into your terminal (you need to be in the <code class="language-plaintext highlighter-rouge">my_project</code> folder when you do this).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git remote add origin https://github.com/lucydot/my_project.git
git push <span class="nt">-u</span> origin main
</code></pre></div></div>

<p>If you make changes to the files on the remote Github repository, you can <code class="language-plaintext highlighter-rouge">pull</code> these changes to your local repository with</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git pull
</code></pre></div></div>

<p>It is important to <code class="language-plaintext highlighter-rouge">git push</code> and <code class="language-plaintext highlighter-rouge">git pull</code> frequently so that your local and remote repositories stay up-to-date with one another.</p>

<h3 id="for-some-tasks-the-github-web-interface-is-a-useful-alternative">For some tasks the Github web interface is a useful alternative</h3>

<p>We have already seen how to create a repository on Github. You can also use the Github web interface (“drag and drop”) to add and commit files.</p>

<h3 id="tasks">TASKS</h3>

<p>Use Github to:</p>
<ol>
  <li>Create a repository for holding the work done in this module</li>
  <li>Create a README.md and select an open source license</li>
  <li>Use the Github drag-and-drop interface to upload the script(s) you wrote in the previous lesson</li>
</ol>

<p>Extension:</p>
<ol>
  <li>Use the git command line to version control and upload the Jupyter Notebooks (or any other file) generated during this course</li>
</ol>

  </div><a class="u-url" href="/CompPhys/2021/08/02/Version_control.html" hidden></a>
</article>
