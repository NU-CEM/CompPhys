<script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } }); </script>
<script type="text/x-mathjax-config">
   MathJax.Hub.Config({
     tex2jax: {
       inlineMath: [ ['$','$'], ["\\(","\\)"] ],
       processEscapes: true
     }
   });
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>


<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Programming good practice</h1><p class="post-meta post-meta-title">
    </p>

    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h3 id="document-your-code">Document your code</h3>

<p>There are multiple ways you can document your code. Below are three examples:</p>

<h4 id="docstrings">Docstrings</h4>

<p>Docstrings are the first statement in a module, function, class or method so programmers can understand what it does without having to read the details of the implementation.</p>

<p>Docstrings are string literals so must be contained within single quote marks (for single line docstrings) or triple quotes (for multiline docstrings). See the example below for a function-level docstring.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> def calc_bulk_density(mass,volume):
     "Return dry bulk density = powder mass / powder volume."
     return mass / volume
</code></pre></div></div>

<p>Docstrings are preferred over in-line comments (see below) as the docstrings can be easily accessed using the Python <code class="language-plaintext highlighter-rouge">help()</code> function. It is also possible to generate online documentation automatically from docstrings.</p>

<h4 id="in-line-comments">In-line comments</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># bulk density is the powder mass / powder volume
density = mass / volume 
</code></pre></div></div>

<h4 id="markdown-in-a-jupyter-notebook">Markdown in a Jupyter Notebook</h4>

<p>For more extensive discussion you can combine code and text in a single document. 
See <a href="https://lucydot.github.io/python_novice/01-run-quit/index.html">this tutorial</a> for more information about using Markdown in a Jupyter Notebook.</p>

<h3 id="focus-on-readability">Focus on readability</h3>

<p>Your code should be easily readable by others. This is a big topic! The <a href="https://www.python.org/dev/peps/pep-0008/">Pep 8 Style Guide for Python code</a> has further guidance, although it is a daunting document. The most important thing is that you are consistent within your own code.</p>

<h4 id="consistency-is-key">Consistency is key</h4>

<p>Code formatting (for example, brackets) and use of whitespace should be consistent. For example, do not mix-and-match whitespace as in the code below:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spam(ham[1], {eggs: 2})   
spam( ham[ 1 ], { eggs: 2} )
</code></pre></div></div>

<p>You should also avoid mixing data types where possible. For example, using a 2-dimensional Numpy array and a 1-dimensional Numpy array within a simulation would usually be better than using a 2-dimensional Numpy array and a 1-dimensional Python list.</p>

<h4 id="variable-and-function-names">Variable and function names</h4>

<p>Use clear, meaningful variable and function names - donâ€™t just use <code class="language-plaintext highlighter-rouge">x</code>, <code class="language-plaintext highlighter-rouge">p</code> and expect the reader to know what they mean! For example <code class="language-plaintext highlighter-rouge">angular_momentum</code> is a better variable name than <code class="language-plaintext highlighter-rouge">omega</code>.</p>

<h4 id="clear-code-structure">Clear code structure</h4>

<p>Import all of the libraries used at the top of your code. Also define any constants that will not change during your simulation (for example, the radius of the earth) at the top of your code.</p>

<p>Use Markdown to write section headings in a Jupyter Notebook. You can also use blank lines to split code into logical blocks. Split long lines of your code using a <code class="language-plaintext highlighter-rouge">\</code> at the end of the line(s). For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>print("this is a really really long line of code \
that I'd like split over two lines")
</code></pre></div></div>

<h3 id="avoid-duplication">Avoid duplication</h3>

<p>Duplication of code should be avoided where possible. There are several ways this can be achieved.</p>

<h4 id="write-functions">Write functions</h4>

<p>If you will re-use a block of code multiple times consider encapsulating it in a function. See <a href="https://lucydot.github.io/python_novice/08-writing-functions/index.html">this tutorial</a> for information about writing functions.</p>

<h4 id="use-external-libraries">Use external libraries</h4>

<p>Use appropriate functions and data-types, including those from external libraries. For example, if you need to perform mathematical operations on an array of values, <a href="https://lucydot.github.io/python_novice/12-numpy-intro/index.html">use Numpy arrays</a> instead of Python lists.</p>

<h4 id="use-control-structures-when-appropriate">Use control structures when appropriate</h4>

<p>Use control structures appropriately. Only use <code class="language-plaintext highlighter-rouge">if</code>, <code class="language-plaintext highlighter-rouge">while</code> or <code class="language-plaintext highlighter-rouge">for</code> loops when necessary.</p>

<h3 id="think-about-reproducibility">Think about reproducibility</h3>

<p><a href="https://www.nature.com/articles/d41586-020-02462-7">Writing reproducible code is difficult</a>. In fact, there are many interesting initiatives designed to improve reproducibility in the computational scientists, such as <a href="https://www.reprohack.org/">Reprohacks</a>.</p>

<p>One straight-forward thing you can do is print the version number for each package you import using <code class="language-plaintext highlighter-rouge">print(packagename.__version__)</code></p>

  </div><a class="u-url" href="/CompPhys/2021/08/02/Good_practice.html" hidden></a>
</article>
